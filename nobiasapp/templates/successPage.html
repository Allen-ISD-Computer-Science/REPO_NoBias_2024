{% load static %}

<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Successfuly Submitted Link</title>
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
    </head>
    <style>
        .helpstuff {
            display: flex;
            margin:auto;
            width:500px;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }
          
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: white;
            background: #415f77
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            opacity:0.77;
           
            position: absolute;
            position: right;
            z-index: 1;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
        }
        
        .hoverstuff {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .box {
            background-color: #f8f8f8;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            line-height: 30px;
            padding-top: 25px;
        }

        .polarity-bar {
            width: 100%;
            height: 20px;
            background-color: #ddd;
            border-radius: 5px;
            overflow: hidden;
            --cwidth1: {{ thisVar.0.0 }};
            --cwidth2: {{ thisVar.0.1 }};
            --cwidth3: {{ thisVar.0.2 }};
        }

        .polarity-bar .section {
            height: 100%;
            float: left;
        }

        .red-section {
            background-color: #ff4646;
            width: var(--cwidth1);
        }

        .grey-section {
            background-color: #a0a0a0;
            width: var(--cwidth2);
        }

        .green-section {
            background-color: #4caf50;
            width: var(--cwidth3);
        }
        h2{
            color: black;
        }

    </style>

    <body>
        <h1> Hello </h1>

        <div class="box">
            <h2>Successfully submitted links</h2>
            <br>
            <div class="hoverstuff">
            <h2 style="font-weight: 200;"> Polarity Bar </h2> <br>
            <div class="tooltip">
                <img src="{% static 'img/help.png' %}" alt="Loading Image"
                    style="width:20px;height:20px;opacity:0.9;margin-left:20px">
                    <span class="tooltiptext"> The more grey your source has, the less bias it has in general! When finding (unbiased) sources try and find ones with the most grey. </span>
            </div>
            </div>
            <div class="helpstuff">
            
            </div> <br>
            <div class="polarity-bar">
                <div class="section red-section"></div>
                <div class="section grey-section"></div>
                <div class="section green-section"></div>
            </div>

            <div class="hoverstuff">
                <h2 style="font-weight: 200;"> Biasometer </h2> <br>
                <div class="tooltip">
                    <img src="{% static 'img/help.png' %}" alt="Loading Image"
                        style="width:20px;height:20px;opacity:0.9;margin-left:20px">
                        <span class="tooltiptext"> The more left the Biasometer is, the less bias it has. The more right the Biasometer is, the more bias it has. </span>
                </div>
            </div>

            <!-- Start Speedometer -->

            <div class="gauge-container">
                <canvas id="gauge" width="250" height="200"></canvas>
            </div>
            <script>
                const canvas = document.getElementById('gauge');
                const ctx = canvas.getContext('2d');
                const gaugeValue = {{ thisVar.0.3 }} ; // Based on the polarity ratio
                const gaugeRangeText = document.getElementById('gaugeRangeText');
        
                function updateGauge() {
                    drawGauge(gaugeValue * 100); 
                    updateGaugeRange(gaugeValue * 100); 
                }
        
                function drawGauge(value) {
                    const centerX = canvas.width / 2;
                    const centerY = canvas.height;
                    const radius = canvas.width / 2 - 10;
        
                    // Clear canvas
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
        
                    // Draw gauge background
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, radius, Math.PI, 2 * Math.PI);
                    ctx.lineWidth = 25;
                    ctx.strokeStyle = '#ddd';
                    ctx.stroke();
        
                    // Draw gauge value
                    const startAngle = Math.PI;
                    const endAngle = (value / 100) * Math.PI + startAngle;
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, radius, startAngle, endAngle);
                    ctx.lineWidth = 24;
                    ctx.strokeStyle = getColor(value);
                    ctx.stroke();
        
                    // Draw pointer
                    const pointerLength = radius - 40;
                    const pointerX = centerX + pointerLength * Math.cos(endAngle);
                    const pointerY = centerY + pointerLength * Math.sin(endAngle);
        
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.lineTo(pointerX, pointerY);
                    ctx.lineWidth = 15;
                    ctx.strokeStyle = '#333';
                    ctx.stroke();
                }
        
                function getColor(value) {
                    if (value < 20) {
                        return '#00ff00'; // Very Positive - Green
                    } else if (value < 40) {
                        return '#66ff33'; // Moderate Positivity - Light Green
                    } else if (value < 60) {
                        return '#ffff00'; // Neutral - Yellow
                    } else if (value < 80) {
                        return '#ff9900'; // Moderate Negativity - Orange
                    } else {
                        return '#ff0000'; // Very Negative - Red
                    }
                }
        
                function updateGaugeRange(value) {
                    if (value < 20) {
                        gaugeRangeText.innerText = 'Low';
                    } else if (value < 40) {
                        gaugeRangeText.innerText = 'Low to Moderate';
                    } else if (value < 60) {
                        gaugeRangeText.innerText = 'Moderate';
                    } else if (value < 80) {
                        gaugeRangeText.innerText = 'Moderate to High';
                    } else {
                        gaugeRangeText.innerText = 'High';
                    }
                }
        
                // Initial draw with default value
                updateGauge();
            </script>

            <!-- End Speedometer -->

            <ul style="list-style-type: none; padding: 0; ">
                
                {% for link in thisVar %}
                <li
                    style="font-family: 'Open Sans', sans-serif; color: #003366; word-wrap: break-word;line-height: 40px;">
                    {{ link }}
                </li>
                {% endfor %}
            </ul>
        </div>


    </body>

</html>